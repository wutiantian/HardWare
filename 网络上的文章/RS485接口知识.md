看懂RS485接口知识
原创： Racer CAN总线硬件互联系统 2018-12-16


一、什么是RS-485接口？它比RS-232-C接口相比有何特点？

答：由于RS-232-C接口标准出现较早，难免有不足之处，主要有以下四点：
（1）接口的信号电平值较高，易损坏接口电路的芯片，又因为与TTL电平不兼容故需使用电平转换电路方能与TTL电路连接。
（2）传输速率较低，在异步传输时，波特率为20Kbps。
（3）接口使用一根信号线和一根信号返回线而构成共地的传输形式，这种共地传输容易产生共模干扰，所以抗噪声干扰性弱。
（4）传输距离有限，最大传输距离标准值为50英尺，实际上也只能用在50米左右。针对RS-232-C的不足，于是就不断出现了一些新的接口标准，RS-485就是其中之一，它具有以下特点：
1）RS-485的电气特性：逻辑"1"以两线间的电压差为+（2-6）V表示；逻辑"0"以两线间的电压差为-（2-6）V表示。接口信号电平比RS-232-C降低了，就不易损坏接口电路的芯片，且该电平与TTL电平兼容，可方便与TTL电路连接。
2）RS-485的数据最高传输速率为10Mbps
3）RS-485接口是采用平衡驱动器和差分接收器的组合，抗共模干能力增强，即抗噪声干扰性好。
4）RS-485接口的最大传输距离标准值为4000英尺，实际上可达3000米，另外RS-232-C接口在总线上只允许连接1个收发器，即单站能力。而RS-485接口在总线上是允许连接多达128个收发器。即具有多站能力,这样用户可以利用单一的RS-485接口方便地建立起设备网络。
5）因RS-485接口具有良好的抗噪声干扰性，长的传输距离和多站能力等上述优点就使其成为首选的串行接口。因为RS485接口组成的半双工网络，一般只需二根连线，所以RS485接口均采用屏蔽双绞线传输。RS485接口连接器采用DB-9的9芯插头座，与智能终端RS485接口采用DB-9（孔），与键盘连接的键盘接口RS485采用DB-9（针）。

二、RS-422与RS-485串行接口标准
1、平衡传输
RS-422、RS-485与RS-232不一样，数据信号采用差分传输方式，也称作平衡传输，它使用一对双绞线，将其中一线定义为A，另一线定义为B

通常情况下，发送驱动器A、B之间的正电平在+2～+6V，是一个逻辑状态，负电平在-2～6V，是另一个逻辑状态。另有一个信号地C，在RS-485中还有一"使能"端，而在RS-422中这是可用可不用的。"使能"端是用于控制发送驱动器与传输线的切断与连接。当"使能"端起作用时，发送驱动器处于高阻状态，称作"第三态"，即它是有别于逻辑"1"与"0"的第三态。

接收器也作与发送端相对的规定，收、发端通过平衡双绞线将AA与BB对应相连，
当在收端AB之间有大于+200mV的电平时，输出正逻辑电平，小于-200mV时，输出负逻辑电平。接收器接收平衡线上的电平范围通常在200mV至6V之间。


2、RS-422电气规定
RS-422标准全称是"平衡电压数字接口电路的电气特性"，它定义了接口电路的特性。图2是典型的RS-422四线接口。实际上还有一根信号地线，共5根线。图1是其DB9连接器引脚定义。由于接收器采用高输入阻抗和发送驱动器比RS232更强的驱动能力，故允许在相同传输线上连接多个接收节点，最多可接10个节点。即一个主设备（Master），其余为从设备（Salve），从设备之间不能通信，所以RS-422支持点对多的双向通信。接收器输入阻抗为4k，故发端最大负载能力是10×4k+100Ω（终接电阻）。RS-422四线接口由于采用单独的发送和接收通道，因此不必控制数据方向，各装置之间任何必须的信号交换均可以按软件方式（XON/XOFF握手）或硬件方式（一对单独的双绞线）实现。RS-422的最大传输距离为4000英尺（约1219米），最大传输速率为10Mb/s。其平衡双绞线的长度与传输速率成反比，在100kb/s速率以下，才可能达到最大传输距离。只有在很短的距离下才能获得最高速率传输。一般100米长的双绞线上所能获得的最大传输速率仅为1Mb/s。

RS-422需要一终接电阻，要求其阻值约等于传输电缆的特性阻抗。在矩距离传输时可不需终接电阻，即一般在300米以下不需终接电阻。终接电阻接在传输电缆的最远端。

3、RS-485电气规定

由于RS-485是从RS-422基础上发展而来的，所以RS-485许多电气规定与RS-422相仿。如都采用平衡传输方式、都需要在传输线上接终接电阻等。RS-485可以采用二线与四线方式，二线制可实现真正的多点双向通信。

而采用四线连接时，与RS-422一样只能实现点对多的通信，即只能有一个主（Master）设备，其余为从设备，但它比RS-422有改进，无论四线还是二线连接方式总线上可多接到32个设备。

RS-485与RS-422的不同还在于其共模输出电压是不同的，RS-485是-7V至+12V之间，而RS-422在-7V至+7V之间，RS-485接收器最小输入阻抗为12k剑鳵S-422是4k健；旧峡梢运礡S-485满足所有RS-422的规范，所以RS-485的驱动器可以用在RS-422网络中应用。

RS-485与RS-422一样，其最大传输距离约为1219米，最大传输速率为10Mb/s。平衡双绞线的长度与传输速率成反比，在100kb/s速率以下，才可能使用规定最长的电缆长度。只有在很短的距离下才能获得最高速率传输。一般100米长双绞线最大传输速率仅为1Mb/s。

RS-485需要2个终接电阻，其阻值要求等于传输电缆的特性阻抗。在矩距离传输时可不需终接电阻，即一般在300米以下不需终接电阻。终接电阻接在传输总线的两端。

三、RS-422与RS-485的网络安装注意要点

RS-422可支持10个节点，RS-485支持32个节点，因此多节点构成网络。网络拓扑一般采用终端匹配的总线型结构，不支持环形或星形网络。在构建网络时，应注意如下几点：
1、采用一条双绞线电缆作总线，将各个节点串接起来，从总线到每个节点的引出线长度应尽量短，以便使引出线中的反射信号对总线信号的影响最低。图8所示为实际应用中常见的一些错误连接方式（a，c，e）和正确的连接方式（b，d，f）。a，c，e这三种网络连接尽管不正确，在短距离、低速率仍可能正常工作，但随着通信距离的延长或通信速率的提高，其不良影响会越来越严重，主要原因是信号在各支路末端反射后与原信号叠加，会造成信号质量下降。
2、应注意总线特性阻抗的连续性，在阻抗不连续点就会发生信号的反射。下列几种情况易产生这种不连续性：总线的不同区段采用了不同电缆，或某一段总线上有过多收发器紧靠在一起安装，再者是过长的分支线引出到总线。
总之，应该提供一条单一、连续的信号通道作为总线。

四、RS-422与RS-485传输线上匹配的一些说明

对RS-422与RS-485总线网络一般要使用终接电阻进行匹配。但在短距离与低速率下可以不用考虑终端匹配。那么在什么情况下不用考虑匹配呢？理论上，在每个接收数据信号的中点进行采样时，只要反射信号在开始采样时衰减到足够低就可以不考虑匹配。但这在实际上难以掌握，美国MAXIM公司有篇文章提到一条经验性的原则可以用来判断在什么样的数据速率和电缆长度时需要进行匹配：当信号的转换时间（上升或下降时间）超过电信号沿总线单向传输所需时间的3倍以上时就可以不加匹配。例如具有限斜率特性的RS-485接口MAX483输出信号的上升或下降时间最小为250ns，典型双绞线上的信号传输速率约为0.2m/ns（24AWGPVC电缆），那么只要数据速率在250kb/s以内、电缆长度不超过16米，采用MAX483作为RS-485接口时就可以不加终端匹配。

一般终端匹配采用终接电阻方法，前文已有提及，RS-422在总线电缆的远端并接电阻，RS-485则应在总线电缆的开始和末端都需并接终接电阻。终接电阻一般在RS-422网络中取100Ω，在RS-485网络中取120Ω。相当于电缆特性阻抗的电阻，因为大多数双绞线电缆特性阻抗大约在100～120Ω。这种匹配方法简单有效，但有一个缺点，匹配电阻要消耗较大功率，对于功耗限制比较严格的系统不太适合。

另外一种比较省电的匹配方式是RC匹配，如图1。利用一只电容C隔断直流成分可以节省大部分功率。但电容C的取值是个难点，需要在功耗和匹配质量间进行折衷。
还有一种采用二极管的匹配方法，如图2。这种方案虽未实现真正的"匹配"，但它利用二极管的钳位作用能迅速削弱反射信号，达到改善信号质量的目的。节能效果显著。

